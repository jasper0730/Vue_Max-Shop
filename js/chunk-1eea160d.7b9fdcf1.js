(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1eea160d"],{"1dde":function(e,t,c){var n=c("d039"),a=c("b622"),o=c("2d00"),r=a("species");e.exports=function(e){return o>=51||!n((function(){var t=[],c=t.constructor={};return c[r]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},"4dcd":function(e,t,c){"use strict";var n=function(e){return{all:e=e||new Map,on:function(t,c){var n=e.get(t);n?n.push(c):e.set(t,[c])},off:function(t,c){var n=e.get(t);n&&(c?n.splice(n.indexOf(c)>>>0,1):e.set(t,[]))},emit:function(t,c){var n=e.get(t);n&&n.slice().map((function(e){e(c)})),(n=e.get("*"))&&n.slice().map((function(e){e(t,c)}))}}},a=n();t["a"]=a},8418:function(e,t,c){"use strict";var n=c("a04b"),a=c("9bf2"),o=c("5c6c");e.exports=function(e,t,c){var r=n(t);r in e?a.f(e,r,o(0,c)):e[r]=c}},"99af":function(e,t,c){"use strict";var n=c("23e7"),a=c("da84"),o=c("d039"),r=c("e8b5"),i=c("861d"),l=c("7b0b"),d=c("07fa"),s=c("8418"),u=c("65f0"),b=c("1dde"),p=c("b622"),m=c("2d00"),f=p("isConcatSpreadable"),h=9007199254740991,j="Maximum allowed index exceeded",O=a.TypeError,g=m>=51||!o((function(){var e=[];return e[f]=!1,e.concat()[0]!==e})),v=b("concat"),N=function(e){if(!i(e))return!1;var t=e[f];return void 0!==t?!!t:r(e)},E=!g||!v;n({target:"Array",proto:!0,forced:E},{concat:function(e){var t,c,n,a,o,r=l(this),i=u(r,0),b=0;for(t=-1,n=arguments.length;t<n;t++)if(o=-1===t?r:arguments[t],N(o)){if(a=d(o),b+a>h)throw O(j);for(c=0;c<a;c++,b++)c in o&&s(i,b,o[c])}else{if(b>=h)throw O(j);s(i,b++,o)}return i.length=b,i}})},f3af:function(e,t,c){"use strict";c.r(t);var n=c("7a23"),a={class:"container"},o={class:"pt-3 pb-5"},r=Object(n["createElementVNode"])("h3",{class:"mt-3 mb-4 fw-bold"},"購物車",-1),i={class:"row"},l={class:"col-md-8"},d={class:"table"},s=Object(n["createElementVNode"])("thead",null,[Object(n["createElementVNode"])("tr",null,[Object(n["createElementVNode"])("th",{width:"40%",class:"border-0 w-100"},"品項"),Object(n["createElementVNode"])("th",{width:"20%",class:"border-0 w-100"},"數量"),Object(n["createElementVNode"])("th",{width:"20%",class:"border-0 w-100"},"金額"),Object(n["createElementVNode"])("th",{width:"20%",class:"border-0 w-100"})])],-1),u={class:"border-0 px-0 py-4"},b={class:"d-flex align-items-center"},p=["src"],m={class:"my-0 ms-2"},f={class:"border-0 align-middle",style:{"max-width":"160px"}},h={class:"d-flex flex-nowrap align-items-center"},j=["onClick"],O=Object(n["createElementVNode"])("i",{class:"bi bi-dash-lg"},null,-1),g=[O],v=["onClick"],N=Object(n["createElementVNode"])("i",{class:"bi bi-plus-lg"},null,-1),E=[N],V={class:"border-0 align-middle"},y={class:"mb-0 ms-auto"},w={class:"border-0 align-middle"},x=["onClick"],k=Object(n["createElementVNode"])("i",{class:"bi bi-x-lg"},null,-1),C=[k],D={key:0,class:"my-5 text-center fs-5"},L={class:"input-group w-100 mb-3"},$=["disabled"],_={class:"input-group-append"},B=["disabled"],q={key:0},S={key:1},M={class:"col-md-4"},T={class:"border p-4 mb-4"},J=Object(n["createElementVNode"])("h4",{class:"fw-bold mb-4"},"訂購明細",-1),P={class:"pt-4"},U={class:"d-flex justify-content-between text-muted"},z=Object(n["createElementVNode"])("p",null,"費用",-1),A={class:"d-flex justify-content-between text-muted"},F=Object(n["createElementVNode"])("p",null,"折扣",-1),R={class:"d-flex justify-content-between mt-4"},G=Object(n["createElementVNode"])("p",{class:"mb-0 h4 fw-bold"},"總金額",-1),H={class:"mb-0 h4 fw-bold"},I=["disabled"],K=Object(n["createElementVNode"])("button",{type:"button",class:"btn btn-dark w-100 mt-2 rounded"}," 繼續購物 ",-1);function Q(e,t,c,O,N,k){var Q=Object(n["resolveComponent"])("Loading"),W=Object(n["resolveComponent"])("router-link");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",a,[Object(n["createVNode"])(Q,{active:N.isLoading,"z-index":1060},null,8,["active"]),Object(n["createElementVNode"])("div",o,[r,Object(n["createElementVNode"])("div",i,[Object(n["createElementVNode"])("div",l,[Object(n["createElementVNode"])("table",d,[s,Object(n["createElementVNode"])("tbody",null,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(N.cartData.carts,(function(t){return Object(n["openBlock"])(),Object(n["createElementBlock"])("tr",{class:"border-bottom border-top",key:t.id},[Object(n["createElementVNode"])("td",u,[Object(n["createElementVNode"])("div",b,[Object(n["createElementVNode"])("div",null,[Object(n["createElementVNode"])("img",{src:t.product.imageUrl,alt:"產品圖片",style:{width:"72px",height:"72px"},class:"object-fit"},null,8,p)]),Object(n["createElementVNode"])("div",null,[Object(n["createElementVNode"])("p",m,Object(n["toDisplayString"])(t.product.title),1)])])]),Object(n["createElementVNode"])("td",f,[Object(n["createElementVNode"])("div",h,[Object(n["createElementVNode"])("button",{type:"button",class:"btn btn-outline-dark border-0 btn-sm rounded me-1",onClick:function(e){return k.handleSub(t)}},g,8,j),Object(n["createTextVNode"])(" "+Object(n["toDisplayString"])(t.qty)+" ",1),Object(n["createElementVNode"])("button",{type:"button",class:"btn btn-outline-dark border-0 btn-sm rounded ms-1",onClick:function(e){return k.handlePlus(t)}},E,8,v)])]),Object(n["createElementVNode"])("td",V,[Object(n["createElementVNode"])("p",y," NT$ "+Object(n["toDisplayString"])(e.$filters.currency(t.total)),1)]),Object(n["createElementVNode"])("td",w,[Object(n["createElementVNode"])("button",{type:"button",class:"btn btn-outline-dark border-0 py-2 rounded",onClick:Object(n["withModifiers"])((function(e){return k.deleteSingle(t.id)}),["prevent"])},C,8,x)])])})),128))])]),N.cartData.carts.length?Object(n["createCommentVNode"])("",!0):(Object(n["openBlock"])(),Object(n["createElementBlock"])("p",D," 目前沒有商品，請加入購物車，謝謝您 ")),Object(n["createElementVNode"])("div",L,[Object(n["withDirectives"])(Object(n["createElementVNode"])("input",{type:"text",class:"form-control rounded shadow-none bg-light",placeholder:"Coupon Code","aria-label":"Recipient's username","aria-describedby":"button-addon2","onUpdate:modelValue":t[0]||(t[0]=function(e){return N.coupon_code=e}),disabled:N.cartData.final_total!==N.cartData.total||!N.cartData.carts.length},null,8,$),[[n["vModelText"],N.coupon_code]]),Object(n["createElementVNode"])("div",_,[Object(n["createElementVNode"])("button",{class:"btn btn-dark rounded",type:"button",id:"button-addon2",onClick:t[1]||(t[1]=Object(n["withModifiers"])((function(){return k.addCoupon&&k.addCoupon.apply(k,arguments)}),["prevent"])),disabled:N.useCoupon||!N.coupon_code||N.cartData.final_total!==N.cartData.total||!N.cartData.carts.length},[N.useCoupon||N.cartData.final_total!==N.cartData.total?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",q,"已套用優惠券")):(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",S,"套用優惠券"))],8,B)])])]),Object(n["createElementVNode"])("div",M,[Object(n["createElementVNode"])("div",T,[J,Object(n["createElementVNode"])("div",P,[Object(n["createElementVNode"])("div",U,[z,Object(n["createElementVNode"])("p",null,"NT$ "+Object(n["toDisplayString"])(e.$filters.currency(N.cartData.total)),1)]),Object(n["createElementVNode"])("div",A,[F,Object(n["createElementVNode"])("p",null," -"+Object(n["toDisplayString"])(e.$filters.currency(N.cartData.total-N.cartData.final_total)),1)])]),Object(n["createElementVNode"])("div",R,[G,Object(n["createElementVNode"])("p",H," NT$ "+Object(n["toDisplayString"])(e.$filters.currency(Math.round(N.cartData.final_total))),1)]),Object(n["createVNode"])(W,{to:"/check"},{default:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("button",{type:"button",class:"btn btn-dark w-100 mt-4 rounded",disabled:!N.cartData.carts.length}," 結帳 ",8,I)]})),_:1}),Object(n["createVNode"])(W,{to:"/products"},{default:Object(n["withCtx"])((function(){return[K]})),_:1})])])])])])}c("99af");var W=c("4dcd"),X={data:function(){return{cartData:{carts:[]},isLoading:!1,qty:1,coupon_code:"helloworld520",useCoupon:!1}},methods:{getCart:function(){var e=this;this.isLoading=!0;var t="".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("jasper07301","/cart");this.$http.get(t).then((function(t){e.isLoading=!1,W["a"].emit("get-cart"),e.cartData=t.data.data})).catch((function(){e.isLoading=!1,e.$swal.fire({title:"失敗",text:"購物車列表",icon:"error",timer:3e3})}))},deleteSingle:function(e){var t=this;this.isLoading=!0;var c="".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("jasper07301","/cart/").concat(e);this.$http.delete(c).then((function(){t.isLoading=!1,t.getCart(),t.$swal.fire({title:"成功",text:"移除",icon:"success",timer:3e3})})).catch((function(){t.isLoading=!1,t.$swal.fire({title:"失敗",text:"移除",icon:"error",timer:3e3})}))},handleSub:function(e){var t=this;if(e.qty>1){this.isLoading=!0,this.qty=e.qty-1;var c="".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("jasper07301","/cart/").concat(e.id),n={data:{product_id:e.id,qty:this.qty}};this.$http.put(c,n).then((function(){t.isLoading=!1,t.getCart()})).catch((function(){t.isLoading=!1,t.$swal.fire({title:"失敗",text:"更新數量",icon:"error",timer:3e3})}))}else this.deleteSingle(e.id)},handlePlus:function(e){var t=this;if(e.qty>0){this.isLoading=!0,this.qty=e.qty+1;var c="".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("jasper07301","/cart/").concat(e.id),n={data:{product_id:e.id,qty:this.qty}};this.$http.put(c,n).then((function(){t.isLoading=!1,t.getCart()})).catch((function(){t.isLoading=!1,t.$swal.fire({title:"失敗",text:"更新數量",icon:"error",timer:3e3})}))}},addCoupon:function(){var e=this;this.isLoading=!0;var t="".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("jasper07301","/coupon"),c={data:{code:this.coupon_code}};this.$http.post(t,c).then((function(t){e.isLoading=!1,e.useCoupon=t.data.success,e.getCart(),e.$swal.fire({title:"成功",text:"套用優惠券",icon:"success",timer:3e3}),e.coupon_code=""})).catch((function(){e.isLoading=!1,e.$swal.fire({title:"失敗",text:"套用優惠券",icon:"error",timer:3e3})}))}},mounted:function(){this.getCart()}},Y=c("6b0d"),Z=c.n(Y);const ee=Z()(X,[["render",Q]]);t["default"]=ee}}]);
//# sourceMappingURL=chunk-1eea160d.7b9fdcf1.js.map